name: Nightly build

on:
  schedule:
    - cron: "0 0 * * *" # Run at midnight UTC
  workflow_dispatch:

jobs:
  build-archetype:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Java SE 8
        uses: actions/setup-java@v3
        with:
          distribution: "temurin"
          java-version: 8

      - name: Cache Maven packages
        uses: actions/cache@v3
        with:
          path: ~/.m2
          key: ${{ runner.os }}-m2-${{ hashFiles('**/pom.xml') }}
          restore-keys: ${{ runner.os }}-m2

      - name: Build Archetype
        run: mvn clean install --file archetype/pom.xml

      - name: Run Archetype for EE 8, SE 8
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 8, SE 8, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 8 Web Profile, SE 8
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 8 Web Profile, SE 8, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 8 Core Profile, SE 8
        id: ee_8_core_se_8_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=core -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_8_core_se_8_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 8 Core Profile, SE 8, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 8 Core Profile, SE 8, with Docker
        id: ee_8_core_se_8_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=core -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_8_core_se_8_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 8 Core Profile, SE 8, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9, SE 8
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9, SE 8, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9 Web Profile, SE 8
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9 Web Profile, SE 8, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9 Core Profile, SE 8
        id: ee_9_core_se_8_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=core -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_core_se_8_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9 Core Profile, SE 8, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9 Core Profile, SE 8, with Docker
        id: ee_9_core_se_8_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=core -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_core_se_8_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9 Core Profile, SE 8, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9.1, SE 8
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9.1, SE 8, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9.1 Web Profile, SE 8
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9.1 Web Profile, SE 8, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9.1 Core Profile, SE 8
        id: ee_9_1_core_se_8_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=core -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_1_core_se_8_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9.1 Core Profile, SE 8, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9.1 Core Profile, SE 8, with Docker
        id: ee_9_1_core_se_8_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=core -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_1_core_se_8_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9.1 Core Profile, SE 8, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 10, SE 8
        id: ee_10_full_se_8_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_10_full_se_8_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 10, SE 8, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 10, SE 8, with Docker
        id: ee_10_full_se_8_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_10_full_se_8_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 10, SE 8, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 10 Web Profile, SE 8
        id: ee_10_web_se_8_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_10_web_se_8_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 10 Web Profile, SE 8, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 10 Web Profile, SE 8, with Docker
        id: ee_10_web_se_8_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_10_web_se_8_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 10 Web Profile, SE 8, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 10 Core Profile, SE 8
        id: ee_10_core_se_8_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=8 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_10_core_se_8_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 10 Core Profile, SE 8, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 10 Core Profile, SE 8, with Docker
        id: ee_10_core_se_8_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=8 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_10_core_se_8_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 10 Core Profile, SE 8, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 8, SE 8, GlassFish
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=8 -Druntime=glassfish -DoutputDirectory=app/glassfish -Dgoals="clean package"
          rm -rf app/glassfish

      - name: Run Archetype for EE 8 Web Profile, SE 8, GlassFish
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=8 -Druntime=glassfish -DoutputDirectory=app/glassfish -Dgoals="clean package"
          rm -rf app/glassfish

      - name: Run Archetype for EE 8, SE 8, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8, SE 8, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8 Web Profile, SE 8, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8 Web Profile, SE 8, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9, SE 8, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9, SE 8, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9 Web Profile, SE 8, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9 Web Profile, SE 8, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1, SE 8, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1, SE 8, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1 Web Profile, SE 8, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1 Web Profile, SE 8, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=8 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8 Web Profile, SE 8, TomEE
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=8 -Druntime=tomee -Ddocker=yes -DoutputDirectory=app/tomee -Dgoals="clean package"
          rm -rf app/tomee

      - name: Run Archetype for EE 8, SE 8, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=8 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 8, SE 8, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=8 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 8 Web Profile, SE 8, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=8 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 8 Web Profile, SE 8, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=8 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Set up Java SE 11
        uses: actions/setup-java@v3
        with:
          distribution: "temurin"
          java-version: 11

      - name: Run Archetype for EE 8, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 8, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 8 Web Profile, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 8 Web Profile, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 8 Core Profile, SE 11
        id: ee_8_core_se_11_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=core -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_8_core_se_11_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 8 Core Profile, SE 11, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 8 Core Profile, SE 11, with Docker
        id: ee_8_core_se_11_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=core -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_8_core_se_11_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 8 Core Profile, SE 11, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9 Web Profile, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9 Web Profile, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9 Core Profile, SE 11
        id: ee_9_core_se_11_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=core -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_core_se_11_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9 Core Profile, SE 11, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9 Core Profile, SE 11, with Docker
        id: ee_9_core_se_11_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=core -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_core_se_11_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9 Core Profile, SE 11, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9.1, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9.1, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9.1 Web Profile, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9.1 Web Profile, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9.1 Core Profile, SE 11
        id: ee_9_1_core_se_11_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=core -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_1_core_se_11_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9.1 Core Profile, SE 11, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9.1 Core Profile, SE 11, with Docker
        id: ee_9_1_core_se_11_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=core -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_1_core_se_11_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9.1 Core Profile, SE 11, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 10, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 10, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 10 Web Profile, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 10 Web Profile, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 10 Core Profile, SE 11
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=11 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 10 Core Profile, SE 11, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=11 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 8, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8 Web Profile, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8 Web Profile, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9 Web Profile, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9 Web Profile, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1 Web Profile, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1 Web Profile, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Web Profile, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Web Profile, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Core Profile, SE 11, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Core Profile, SE 11, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=11 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1 Web Profile, SE 11, Payara
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=11 -Druntime="payara" -Ddocker=yes -DoutputDirectory="app/payara" -Dgoals="clean package"
          rm -rf app/payara

      - name: Run Archetype for EE 9.1 Web Profile, SE 11, TomEE
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=11 -Druntime="tomee" -Ddocker=yes -DoutputDirectory="app/tomee" -Dgoals="clean package"
          rm -rf app/tomee

      - name: Run Archetype for EE 8, SE 11, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=11 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 8, SE 11, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=11 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 8 Web Profile, SE 11, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=11 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 8 Web Profile, SE 11, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=11 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 10, SE 11, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=11 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 10, SE 11, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=11 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 10 Web Profile, SE 11, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=11 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 10 Web Profile, SE 11, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=11 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 10 Core Profile, SE 11, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=11 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 10 Core Profile, SE 11, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=11 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Set up Java SE 17
        uses: actions/setup-java@v3
        with:
          distribution: "temurin"
          java-version: 17

      - name: Run Archetype for EE 8, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 8, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 8 Web Profile, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 8 Web Profile, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 8 Core Profile, SE 17
        id: ee_8_core_se_17_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=core -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_8_core_se_17_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 8 Core Profile, SE 17, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 8 Core Profile, SE 17, with Docker
        id: ee_8_core_se_17_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=core -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_8_core_se_17_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 8 Core Profile, SE 17, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9 Web Profile, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9 Web Profile, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9 Core Profile, SE 17
        id: ee_9_core_se_17_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=core -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_core_se_17_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9 Core Profile, SE 17, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9 Core Profile, SE 17, with Docker
        id: ee_9_core_se_17_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=core -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_core_se_17_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9 Core Profile, SE 17, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9.1, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9.1, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9.1 Web Profile, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 9.1 Web Profile, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 9.1 Core Profile, SE 17
        id: ee_9_1_core_se_17_none
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=core -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_1_core_se_17_none"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9.1 Core Profile, SE 17, without Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 9.1 Core Profile, SE 17, with Docker
        id: ee_9_1_core_se_17_none_docker
        continue-on-error: true
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=core -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"

      - name: Check Maven Build Status
        run: |
          if [[ "${ steps["ee_9_1_core_se_17_none_docker"].outcome }" != "failure" ]]; then
            echo "Maven build for EE 9.1 Core Profile, SE 17, with Docker succeeded, test failed."
            exit 1
          fi

      - name: Run Archetype for EE 10, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 10, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 10 Web Profile, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 10 Web Profile, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 10 Core Profile, SE 17
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=17 -DoutputDirectory="app" -Dgoals="clean package"
          rm -rf app

      - name: Run Archetype for EE 10 Core Profile, SE 17, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=17 -Ddocker=yes -DoutputDirectory="app" -Dgoals="clean package"
          if [ -f app/jakartaee-hello-world/Dockerfile ]; then
            echo "Dockerfile found, test failed."
            exit 1
          fi
          rm -rf app

      - name: Run Archetype for EE 10, SE 17, GlassFish
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=17 -Druntime=glassfish -DoutputDirectory=app/glassfish -Dgoals="clean package"
          rm -rf app/glassfish

      - name: Run Archetype for EE 8, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8 Web Profile, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 8 Web Profile, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=full -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9 Web Profile, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9 Web Profile, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9 -Dprofile=web -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=full -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1 Web Profile, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 9.1 Web Profile, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=9.1 -Dprofile=web -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Web Profile, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Web Profile, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Core Profile, SE 17, Open Liberty
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=no -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Core Profile, SE 17, Open Liberty, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=17 -Druntime="open-liberty" -Ddocker=yes -DoutputDirectory="app/open-liberty" -Dgoals="clean package"
          rm -rf app/open-liberty

      - name: Run Archetype for EE 10 Core Profile, SE 17, Payara
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -DjavaVersion=17 -Druntime=payara -Ddocker=yes -DoutputDirectory=app/payara -Dgoals="clean package"
          rm -rf app/payara

      - name: Run Archetype for EE 10 Web Profile, SE 17, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=17 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 8, SE 17, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=17 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 8, SE 17, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=full -DjavaVersion=17 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 8 Web Profile, SE 17, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=17 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 8 Web Profile, SE 17, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=8 -Dprofile=web -DjavaVersion=17 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 10, SE 17, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=17 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 10, SE 17, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=full -DjavaVersion=17 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 10 Web Profile, SE 17, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=17 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 10 Web Profile, SE 17, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=web -DjavaVersion=17 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

      - name: Run Archetype for EE 10 Core Profile, SE 17, WildFly
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=17 -Druntime=wildfly -DoutputDirectory=app/wildfly -Dgoals="clean package"
          rm -rf app/wildfly

      - name: Run Archetype for EE 10 Core Profile, SE 17, WildFly, with Docker
        run: |
          mvn archetype:generate -DinteractiveMode=false -DaskForDefaultPropertyValues=false -DarchetypeGroupId=org.eclipse.starter -DarchetypeArtifactId=jakarta-starter -DarchetypeVersion=2.3.0-SNAPSHOT -DjakartaVersion=10 -Dprofile=core -DjavaVersion=17 -Druntime=wildfly -Ddocker=yes -DoutputDirectory=app/wildfly -Dgoals="clean package"
          docker build -t test-image app/wildfly/jakartaee-hello-world
          docker rmi test-image
          rm -rf app/wildfly

  build-ui:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v3
      - name: Setup Java
        uses: actions/setup-java@v3
        with:
          distribution: "temurin"
          java-version: 11

      - name: Cache Maven packages
        uses: actions/cache@v3
        with:
          path: ~/.m2
          key: ${{ runner.os }}-m2-${{ hashFiles('**/pom.xml') }}
          restore-keys: ${{ runner.os }}-m2

      - name: Build UI
        run: mvn clean package --file ui/pom.xml
